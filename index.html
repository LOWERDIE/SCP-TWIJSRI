<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SCP-TH-3921 — twijsri | D-SCP </title>
  <meta name="description" content="หน้าเว็บสำหรับลงข้อมูล SCP (สไตล์แฟ้มมูลนิธิ) — เวอร์ชันเทมเพลตพร้อมธีมมืด/สว่าง พิมพ์สวย ใช้งานง่าย" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;400;600;700&family=Kanit:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b0e12;
      --panel: #0f141b;
      --muted: #a2b0c3;
      --text: #e6eefc;
      --accent: #f04d3a; /* แดงเตือน */
      --accent-2: #19c37d; /* เขียวสถานะ */
      --brand: #f5f7fb;
      --card: #121721;
      --border: #1f2a38;
      --shadow: 0 10px 24px rgba(0,0,0,.45), 0 2px 6px rgba(0,0,0,.35);
      --header-height: 56px;
    }
    .light {
      --bg: #f6f7f9;
      --panel: #ffffff;
      --muted: #5a6472;
      --text: #0c1220;
      --accent: #d6292c;
      --accent-2: #0ea668;
      --brand: #0c1220;
      --card: #ffffff;
      --border: #e6eaf0;
      --shadow: 0 10px 24px rgba(10, 22, 44, .08), 0 2px 6px rgba(10, 22, 44, .05);
    }

    html, body { height: 100%; }
    body {
      position: relative;
      margin: 0;
      min-height: 100vh;
      padding-top: calc(var(--header-height) + 16px);
      background-color: var(--bg);
      color: var(--text);
      font-family: "Kanit", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans Thai", "Chakra Petch", sans-serif;
      line-height: 1.65;
      opacity: 1;
      transition: background-color .4s ease, color .4s ease;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      pointer-events: none;
      background:
        radial-gradient(1400px 900px at 18% 12%, color-mix(in oklab, var(--accent) 16%, transparent), transparent 68%),
        radial-gradient(1200px 820px at 80% -18%, rgba(128,169,255,.18), transparent 60%),
        radial-gradient(1200px 880px at 50% 120%, color-mix(in oklab, var(--accent-2) 14%, transparent), transparent 72%);
      background-repeat: no-repeat;
    }
    .container {
      max-width: 980px;
      margin: 24px auto 64px;
      padding: 0 16px;
    }
    header.site {
      position: fixed; top: 0; left: 0; right: 0; z-index: 90;
      backdrop-filter: saturate(160%) blur(8px);
      background: color-mix(in oklab, var(--bg) 80%, transparent);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 3px 12px rgba(8, 10, 16, .55);
    }
    header.site.is-scrolled {
      background: color-mix(in oklab, var(--bg) 95%, transparent);
      border-bottom-color: color-mix(in oklab, var(--border) 70%, transparent);
      box-shadow: 0 18px 36px rgba(6, 10, 18, .38);
    }
    header.site .container { margin: 0 auto; padding: 0 16px; }
    .site-inner { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 8px 0; min-height: var(--header-height); flex-wrap: nowrap; }
    .brand { display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px; }
    .brand .brand-icon {
      width: 36px;
      height: 36px;
      object-fit: contain;
      filter: invert(1) brightness(1.2) contrast(.9);
      transition: filter .2s ease;
    }
    .light .brand .brand-icon { filter: none; }
    .brand .title { font-size: 16px; color: var(--brand); }

    .actions { display:flex; align-items:center; gap:8px; margin-left:auto; }
    header.site .actions .btn {
      padding: 6px 10px;
      border-radius: 10px;
      font-size: 13px;
      min-width: auto;
      box-shadow: none;
    }
    .btn {
      display:inline-flex; align-items:center; gap:8px;
      justify-content:center;
      padding: 8px 12px; border-radius: 12px; border: 1px solid var(--border);
      background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 92%, transparent), var(--panel));
      color: var(--text); cursor: pointer; font-weight:600; font-size: 14px;
      font-family: "Kanit", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans Thai", sans-serif;
      box-shadow: var(--shadow);
      transition: transform .12s ease, opacity .2s ease, border .2s ease;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn.secondary { background: var(--panel); opacity: .95; }

    .badge {
      display:inline-flex; align-items:center; gap:8px; padding: 8px 12px; border-radius: 999px;
      border:1px solid var(--border); background: var(--card); font-weight:700; font-size: 12px; letter-spacing:.3px;
      box-shadow: var(--shadow);
    }
    .badge .dot { width:10px; height:10px; border-radius:999px; background: var(--accent); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 25%, transparent); }

    .paper {
      background: linear-gradient(180deg, color-mix(in oklab, var(--panel) 90%, transparent), var(--panel));
      border: 1px solid var(--border); border-radius: 20px; box-shadow: var(--shadow);
      overflow: hidden;
    }
    .paper .head {
      display:grid; grid-template-columns: 1fr auto; gap: 12px; align-items:flex-start;
      padding: 24px 22px 12px; border-bottom: 1px dashed var(--border);
    }
    .paper .titlexl { font-size: clamp(22px, 2.8vw, 34px); margin: 0 0 6px; line-height: 1.25; }
    .meta { display:flex; flex-wrap:wrap; gap:8px; color: var(--muted); font-size: 14px; }

    .grid { display:grid; gap: 16px; padding: 18px 22px 26px; grid-template-columns: minmax(0, 1fr); }
    .section { background: var(--card); border:1px solid var(--border); border-radius: 16px; padding: 18px 18px; }
    .section h3 { margin: 0 0 10px; font-size: 18px; }
    .section h4 { margin: 16px 0 8px; font-size: 16px; }

    .callout {
      border-left: 6px solid var(--accent);
      background: color-mix(in oklab, var(--accent) 14%, var(--card));
      padding: 14px 14px 14px 16px; border-radius: 12px; margin: 8px 0 0;
    }
    .gallery-callout {
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
      text-align:center;
      margin: 0;
      width: min(260px, 100%);
      box-sizing: border-box;
    }
    .gallery-callout .btn { align-self:center; margin-top: 4px; }
    .paper .head .gallery-callout { justify-self: end; align-self: start; }

    .audio-player {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      margin: 16px 0 0;
      padding: 14px 18px 18px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: color-mix(in oklab, var(--panel) 80%, transparent);
    }
    .audio-player audio { display:none; }
    .audio-player .btn {
      display:inline-flex;
      align-items:center;
      gap:10px;
      min-width: 190px;
      justify-content:center;
    }
    .audio-progress { display:flex; flex-direction:column; gap:6px; width:min(100%, 420px); }
    .audio-slider {
      --progress: 0%;
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(90deg,
        var(--accent) 0%,
        var(--accent) var(--progress),
        color-mix(in oklab, var(--border) 80%, transparent) var(--progress),
        color-mix(in oklab, var(--border) 80%, transparent) 100%);
      cursor: pointer;
      transition: filter .2s ease;
    }
    .audio-slider:focus-visible { outline: 2px solid color-mix(in oklab, var(--accent) 50%, transparent); outline-offset: 4px; }
    .audio-slider:hover { filter: brightness(1.05); }
    .audio-slider:disabled { cursor:not-allowed; filter: grayscale(.6); opacity:.5; }
    .audio-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent);
      border: 2px solid color-mix(in oklab, var(--panel) 80%, transparent);
      box-shadow: 0 1px 4px rgba(0,0,0,.4);
      transition: transform .15s ease, background .2s ease;
    }
    .audio-slider::-webkit-slider-thumb:hover { transform: scale(1.05); }
    .audio-slider::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent);
      border: 2px solid color-mix(in oklab, var(--panel) 80%, transparent);
      box-shadow: 0 1px 4px rgba(0,0,0,.4);
      transition: transform .15s ease, background .2s ease;
    }
    .audio-slider::-moz-range-thumb:hover { transform: scale(1.05); }
    .audio-slider::-moz-range-track {
      height: 8px;
      border-radius: 999px;
      background: transparent;
    }
    .audio-time-row { display:flex; justify-content:space-between; font-size: 13px; color: var(--muted); letter-spacing:.3px; }
    .audio-time { font-size: 13px; color: inherit; letter-spacing: inherit; }

    .reveal {
      opacity: 0;
      transform: translateY(18px);
      filter: blur(2px);
      transition: opacity .65s ease, transform .65s cubic-bezier(.22,.61,.36,1), filter .6s ease;
    }
    .reveal.is-visible {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }

    .gallery-modal {
      position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
      padding: 40px 16px; background: rgba(4, 6, 12, .78);
      backdrop-filter: blur(6px);
      z-index: 160;
    }
    .gallery-modal[hidden] { display: none !important; }
    .gallery-modal .gallery-dialog {
      position: relative;
      background: color-mix(in oklab, var(--panel) 95%, transparent);
      border:1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      width: min(880px, 100%);
      padding: 24px 24px 28px;
      display:flex;
      flex-direction: column;
      gap: 18px;
      outline: none;
    }
    .gallery-modal .gallery-title { margin: 0; font-size: 20px; }
    .gallery-frame {
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      min-height: 340px;
      background: #070b13;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .gallery-frame img,
    .gallery-frame video { width: 100%; height: 100%; object-fit: contain; max-height: 70vh; }
    .gallery-controls { display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .gallery-nav { display:flex; gap:10px; }
    .gallery-pagination { color: var(--muted); font-size: 14px; }
    .gallery-close {
      position:absolute; top:12px; right:12px;
      background: none;
      border:0;
      color: var(--muted);
      font-size: 26px;
      line-height: 1;
      cursor: pointer;
    }
    .gallery-close:hover { color: var(--text); }
    .btn.ghost {
      background: transparent;
      border-color: color-mix(in oklab, var(--border) 70%, transparent);
      box-shadow: none;
    }
    .btn.ghost:hover { background: color-mix(in oklab, var(--panel) 50%, transparent); }
    body.modal-open { overflow: hidden; }

    @keyframes fadeInSite {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes auroraShift {
      0% { transform: scale(1) translate3d(0,0,0); opacity: .65; }
      50% { transform: scale(1.06) translate3d(2%, -2%, 0); opacity: .78; }
      100% { transform: scale(1.12) translate3d(-2%, 3%, 0); opacity: .72; }
    }

    @media (max-width: 820px) {
      .site-inner { gap: 10px; flex-wrap: wrap; }
      .actions { margin-left: auto; }
      .paper .head { grid-template-columns: 1fr; }
      .paper .head > div:last-child { width: 100%; justify-self: stretch; }
      .grid { padding: 16px 18px 24px; }
      .section { padding: 16px; }
      .toc { gap: 8px; }
    }

    @media (max-width: 600px) {
      .container { margin: 16px auto 48px; padding: 0 14px; }
      .paper .head { padding: 20px 18px 10px; }
      .meta { flex-direction: column; align-items: flex-start; gap: 6px; }
      .gallery-callout { width: 100%; }
      .gallery-callout .btn { width: 100%; }
      .gallery-controls { flex-direction: column; align-items: stretch; gap: 10px; }
      .gallery-nav { width: 100%; justify-content: space-between; }
      .gallery-nav .btn { flex: 1; justify-content: center; }
      .gallery-pagination { text-align: center; width: 100%; }
    }

    @media (max-width: 480px) {
      .site-inner { gap: 8px; }
      .brand .title { font-size: 14px; }
      .grid { padding: 14px 14px 20px; gap: 14px; }
      .section { padding: 14px; }
      .callout { padding: 12px 12px 12px 14px; }
      .audio-player { padding: 14px 12px 18px; }
      .audio-player .btn { width: 100%; justify-content: center; }
      .audio-progress { width: 100%; }
      .audio-time-row { font-size: 12px; }
      .gallery-modal .gallery-dialog { padding: 18px 16px 22px; }
      .gallery-frame { min-height: 200px; }
    }

    @media (min-width: 1080px) {
      .grid { grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); }
    }

    @media (prefers-reduced-motion: no-preference) {
      body { opacity: 0; animation: fadeInSite .7s ease-out forwards; }
      body::before { animation: auroraShift 28s ease-in-out infinite alternate; }
      header.site { transition: background .4s ease, border-color .4s ease, box-shadow .4s ease; }
      .paper, .section, .callout, footer, .toc .badge, .actions, .brand, .audio-player {
        transition: transform .5s ease, box-shadow .5s ease, background .45s ease, border-color .45s ease;
      }
      .paper:hover, .section:hover { transform: translateY(-4px); box-shadow: 0 18px 34px rgba(8, 12, 20, .42); }
      .toc .badge:hover { transform: translateY(-2px); }
    }

    @media (max-width: 640px) {
      .gallery-modal .gallery-dialog { padding: 20px 18px 24px; }
      .gallery-frame { min-height: 220px; }
      .gallery-controls { gap: 8px; }
    }

    .two-col { display:grid; gap:14px; grid-template-columns: 1fr; }
    @media (min-width: 860px) { .two-col { grid-template-columns: 1fr 1fr; } }

    details { border:1px dashed var(--border); border-radius: 12px; padding: 14px 14px; background: color-mix(in oklab, var(--panel) 70%, transparent); }
    summary { cursor:pointer; font-weight:700; }
    summary::marker { color: var(--accent); }

    .kbd { font-family: ui-monospace, Menlo, Consolas, "SFMono-Regular", monospace; font-size: 12px; background: color-mix(in oklab, var(--panel) 80%, transparent); padding: 2px 8px; border-radius: 8px; border: 1px solid var(--border); }

    .toc { display:flex; gap:10px; flex-wrap:wrap; margin: 6px 0 0; }
    .toc a { text-decoration:none; }

    footer { color: var(--muted); font-size: 12px; margin: 14px 0 40px; text-align:center; }

    /* พิมพ์สวย */
    @media print {
      body { background: #fff; padding-top: 0; }
      body::before { content: none; }
      header.site { position: static; box-shadow: none; }
      header.site, .actions { display:none !important; }
      .gallery-modal { display:none !important; }
      .container { max-width: 100%; margin: 0; }
      .paper, .section { box-shadow: none; border-color: #d6dbe3; }
    }
  </style>
</head>
<body>
  <header class="site">
    <div class="site-inner container">
      <div class="brand" aria-label="SCP Brand">
        <!-- โลโก้แบบ SVG ง่าย ๆ -->
        <img class="brand-icon" src="https://upload.wikimedia.org/wikipedia/commons/e/ec/SCP_Foundation_%28emblem%29.svg" alt="SCP Foundation emblem" loading="lazy" decoding="async" />
        <span class="title">D-SCP</span>
      </div>
      <div class="actions">
        <button class="btn" id="themeBtn" type="button" title="สลับธีม">🌓 สลับธีม</button>
      </div>
    </div>
  </header>

  <main class="container">
    <article class="paper" id="scp-entry">
      <div class="head">
        <div>
          <h1 class="titlexl">SCP-TH-3921 — “twijsri”</h1>
          <div class="meta">
            <span class="badge"><span class="dot"></span> ระดับวัตถุ: Euclid</span>
            <span class="badge" style="--accent: var(--accent-2);"><span class="dot" style="background: var(--accent-2);"></span> สถานะ: กักกันมีเสถียรภาพ</span>
          </div>
          <nav class="toc" aria-label="สารบัญ">
            <a class="badge" href="#containment">มาตรการกักกัน</a>
            <a class="badge" href="#description">คำอธิบาย</a>
            <a class="badge" href="#discovery">ประวัติการค้นพบ</a>
            <a class="badge" href="#experiments">บันทึกการทดลอง</a>
            <a class="badge" href="#interview">บันทึกสัมภาษณ์</a>
            <a class="badge" href="#incident">เหตุการณ์</a>
            <a class="badge" href="#updates">อัปเดตมาตรการ</a>
            <a class="badge" href="#use">ศักยภาพการใช้ประโยชน์</a>
            <a class="badge" href="#status">สถานะปัจจุบัน</a>
          </nav>
        </div>
        <div class="callout gallery-callout" role="note">
          <strong>อัลบั้มภาพประกอบ</strong>
          <p style="margin:0">คลิกเพื่อเปิดดูภาพประกอบของ SCP-TH-3921</p>
          <button class="btn" type="button" id="openGallery">เปิดอัลบั้มภาพ</button>
        </div>
      </div>

      <div class="grid">
        <section id="containment" class="section">
          <h3>มาตรการกักกันพิเศษ</h3>
          <p>SCP-TH-3921 ถูกกักกันในห้องความดันลบระดับ-3 พร้อมประตูอากาศ 3 ชั้นและระบบกรองอากาศแบบดูดซับหลายชั้น (คาร์บอนกัมมันต์/ซีโอไลต์/ตัวเร่งปฏิกิริยาออกซิเดชันเย็น) ท่อระบายทั้งหมดต้องมีวาล์วกลับทางและกับดักเจลซิลิกาเปลี่ยนใหม่ทุก 12 ชั่วโมงโดยแขนกลอัตโนมัติ ห้ามบุคลากรเข้าใกล้ในรัศมี 15 เมตรโดยปราศจากชุดปิดผนึกเต็มตัว (รุ่น OLFA-9) และหน้ากากกรองชนิด “Olfacto-Shield” (ฟิลเตอร์ OS-TS)</p>
          <p>ตัวอย่างอากาศจากห้องกักกันให้เก็บแช่แข็งที่ −80 °C และติดฉลาก “TS-คงสภาพ” ห้ามเปิดขวดภายนอกตู้ความปลอดภัยชีวภาพระดับ 3.5 ทุกเอกสารภาคสนามที่บรรยาย “กลิ่น” ต้องผ่านการลบคำเชิงพรรณนาตาม โปรโตคอลดีโอโดรา (Deodora) เพื่อหลีกเลี่ยงผลกระทบด้านการรับรู้ (ดูคำอธิบายผล “อีเดโอสเมียซิส” ด้านล่าง)</p>
        </section>

        <section id="description" class="section">
          <h3>คำอธิบาย</h3>
          <p>SCP-TH-3921 เป็นมนุษย์เพศชายวัยผู้ใหญ่ สัญชาติไม่ทราบแน่ชัด ใช้นามเรียกตัวเองว่า “twijsri” (อ่าน: ทวิจ-ศรี) อวัยวะและสรีรวิทยาทั่วไปไม่ผิดปกติ ยกเว้นการหลั่งสารระเหยสูง (ชุดสารประกอบระบุเป็น TS-01 ถึง TS-██) ผ่านผิวหนังและรูขุมขนอย่างต่อเนื่อง แม้ในสภาวะพัก สารเหล่านี้มีคุณสมบัติผิดธรรมชาติ 3 ประการ:</p>
          <ul>
            <li><strong>การกระจายตัวแบบ “แทรกทะลุผนึก”</strong> — โมเลกุล TS สามารถซึมผ่านวัสดุปิดผนึกที่ควรป้องกันกลิ่นได้ (ยางซิลิโคน เทฟลอน โลหะบาง) ด้วยอัตราการแพร่สูงผิดปกติ ทำให้ “กลิ่น” เล็ดลอดแม้ระบบซีลสมบูรณ์</li>
            <li><strong>ผลกระทบต่อการรับรู้: “อีเดโอสเมียซิส” (Ideosmiasis)</strong> — ผู้ที่รับกลิ่นหรือแม้เพียง “จินตนาการกลิ่น” จากคำบรรยายเชิงภาพพจน์ จะเกิดการชดเชยทางจิตที่ทำให้ (ก) ปฏิเสธว่า “ไม่เหม็น” หรือ “ชินแล้ว” อย่างดื้อดึง นำไปสู่การละเลยขั้นตอนความปลอดภัย และ (ข) เกิดภาพจำกลิ่นติดวัตถุ (olfactory imprint) แม้หลังการทำความสะอาด ทำให้พื้นที่ “ยังเหม็น” ในการรับรู้ของผู้สัมผัสนานถึง 7–14 วัน</li>
            <li><strong>ผลกระทบชีวภาพสภาพแวดล้อม</strong> — จุลชีพบางชนิดในพื้นที่สัมผัส TS จะกลายพันธุ์รวดเร็วและย่อย TS เป็นก๊าซซัลไฟด์/เมอร์แคปแทนเพิ่ม ทำให้ “กลิ่นทวีคูณ” และก่อการกัดกร่อนโลหะช้า ๆ</li>
          </ul>
          <p>ผลเฉียบพลันต่อมนุษย์ที่ได้รับ TS เข้มข้น: คลื่นไส้ ปวดศีรษะ น้ำตาไหล สูญเสียสมาธิ และพฤติกรรมหลีกเลี่ยงรุนแรง ในระดับต่ำต่อเนื่อง: อารมณ์หดหู่/ความอับอายจากการตระหนักว่าตน “มีกลิ่นติดตัว” (แม้ไม่ได้รับสารโดยตรง)</p>
          <p>SCP-TH-3921 มีสภาวะอารมณ์คงที่ วางตัวร่วมมือ และขอ “อยู่ห่างคน” เสมอ รายงานว่าไม่สามารถ “ได้กลิ่นตัวเอง” (ภาวะ anosmia เฉพาะตน)</p>
        </section>

        <section id="discovery" class="section">
          <h3>ประวัติการค้นพบ</h3>
          <p>กู้คืนจากพื้นที่ชุมชนหนาแน่นใน จ.███ ประเทศไทย หลังมีรายงาน “บ้านผีเหม็น” ทำให้ชาวบ้านเป็นลมและเกิดอุบัติเหตุรถชนต่อเนื่อง MTF จางกลิ่น-3 ใช้เต็นท์ความดันลบเคลื่อนที่และโฟมปิดผนึกชั่วคราวเพื่อเคลื่อนย้ายเบื้องต้น มาตรการพ่นน้ำหอมและโอโซนที่ท้องถิ่นใช้ก่อนหน้าทำให้สถานการณ์เลวร้ายลง (เพิ่มสารอนุพันธ์กำมะถัน)</p>
        </section>

        <section id="experiments" class="section">
          <h3>บันทึกการทดลองย่อ</h3>
          <div class="two-col">
            <div>
              <h4>T-12: สารดูดซับต่าง ๆ</h4>
              <p>คาร์บอนกัมมันต์และซีโอไลต์ลดความเข้มกลิ่นได้ 82–88% แต่ยังพบการ “แทรกทะลุผนึก” ต้องใช้หลายชั้นสลับตัวเร่งปฏิกิริยา</p>
              <h4>T-19: อุณหภูมิ</h4>
              <p>ที่ 4 °C การปล่อย TS ลดลง ~60% ที่ −20 °C ลดลง ~95% แต่เกิดการควบแน่นบนซีล เพิ่มโอกาสเล็ดลอด</p>
            </div>
            <div>
              <h4>T-27: น้ำหอม/สารกลบกลิ่น</h4>
              <p>น้ำหอม/เทอร์พีนทำปฏิกิริยากับ TS เกิดเมอร์แคปแทนซับซ้อน “กลิ่นหนักขึ้น” ห้ามใช้</p>
              <h4>T-31: ไมโครไบโอมควบคุม</h4>
              <p>โปรโตคอลฉีดจุลินทรีย์ดัดแปลงสายพันธุ์ Paracoccus sp. ที่ย่อย TS โดยไม่ให้ผลพลอยได้ก่อกลิ่น ลดระดับ TS อากาศได้อีก ~40% ต้องคุมไม่ให้หลุดสู่ภายนอก</p>
            </div>
          </div>
        </section>

        <section id="interview" class="section">
          <h3>บันทึกสัมภาษณ์ 3921-A (ตัดตอน)</h3>
          <details open>
            <summary>คลิกเพื่อแสดง/ซ่อนบทสนทนา</summary>
            <div class="audio-player" data-audio-player>
              <button class="btn ghost" type="button" data-audio-toggle aria-label="Play interview audio">
                <span data-audio-icon>&#9654;</span>
                <span data-audio-label>Play audio</span>
              </button>
              <div class="audio-progress">
                <div class="audio-time-row">
                  <span class="audio-time" data-audio-time-current>00:00</span>
                  <span class="audio-time" data-audio-time-total>00:00</span>
                </div>
                <input class="audio-slider" type="range" min="0" max="0" value="0" step="0.01" data-audio-slider aria-label="Audio position">
              </div>
              <audio src="rec-926377566.ogg" preload="metadata"></audio>
            </div>
            <blockquote>
              <p><strong>นักวิจัย:</strong> คุณอยากให้เราเรียกคุณว่าอะไร</p>
              <p><strong>SCP-TH-3921:</strong> เรียก twijsri ก็ได้ครับ มันเป็นชื่อในเน็ต…หลัง ๆ คนเรียกผมแค่ “ไอ้เหม็น” ผมเลยขออยู่ไกล ๆ ใคร ๆ จะได้ไม่เดือดร้อน</p>
              <p><strong>นักวิจัย:</strong> คุณรับรู้กลิ่นที่คนอื่นบอกหรือไม่</p>
              <p><strong>SCP-TH-3921:</strong> ผมไม่เคยได้กลิ่นตัวเองเลยครับ แต่เห็นแววตาคนอื่นก็รู้…มันแย่ ผมอาบน้ำถูแรงแค่ไหน ก็ยัง— (เงียบ) ถ้าปล่อยให้ผมอยู่คนเดียวได้ ผมยินดี</p>
            </blockquote>
          </details>
        </section>

        <section id="incident" class="section">
          <h3>เหตุการณ์ 3921-K: “ไม่เหม็นหรอก”</h3>
          <p>ระหว่างเปลี่ยนฟิลเตอร์ชั้นที่ 2 เจ้าหน้าที่สองนายละเลยขั้นตอนยืนยันกลิ่นตามโปรโตคอลดีโอโดรา โดยกล่าวว่า “ไม่เหม็นแล้ว” ซ้ำ ๆ (ผลอีเดโอสเมียซิส) ทำให้เปิดผนึกพร้อมกันสองชั้นและเกิดการรั่วไหลในโถง B-2 นาน 11 นาที จำเป็นต้องอพยพโซนย่อยและล้างระบบอากาศ 36 ชั่วโมง</p>
        </section>

        <section id="updates" class="section">
          <h3>อัปเดตมาตรการ (โปรโตคอลดีโอโดรา)</h3>
          <ul>
            <li>ทุก 30 นาที เจ้าหน้าที่ในเขต 3921 ต้องกล่าวยืนยันสภาพ olfactory checkpoint ตามสคริปต์สั้น ๆ (“ขณะนี้กลิ่นยังคงอยู่ ต้องปฏิบัติตามมาตรการ”) เพื่อหักล้างแนวโน้มปฏิเสธ</li>
            <li>ห้ามใช้คำพรรณนากลิ่นแบบมีอุปมา/อุปไมยในเอกสาร (ลดการกระตุ้น ideosmiasis ผ่านภาษา)</li>
            <li>เพิ่มชั้นกรองแบบสลับวัสดุ และบังคับพักระบบ 5 นาทีระหว่างเปิดแต่ละประตูอากาศ</li>
          </ul>
        </section>

        <section id="use" class="section">
          <h3>ศักยภาพการใช้ประโยชน์ (อยู่ระหว่างทบทวน)</h3>
          <p>การกลายพันธุ์จุลชีพที่ย่อย TS อย่างจำเพาะอาจนำไปสู่ตัวดูดซับสารเคมีรุ่นใหม่สำหรับโรงงาน/ภัยสารเคมี อย่างไรก็ตาม ความเสี่ยงด้านการแพร่กลิ่นและการปนเปื้อนมีมยังสูง</p>
        </section>

        <section id="status" class="section">
          <h3>สถานะปัจจุบัน</h3>
          <p>กักกันมีเสถียรภาพ ภาวะอารมณ์ของวัตถุคงที่เมื่อได้รับการเว้นระยะจากบุคลากรและตารางกิจวัตรเดิม (อ่านหนังสือ/ออกกำลังในห้องความดันลบ) การเคลื่อนย้ายออกนอกไซต์ถือว่า “ไม่จำเป็น” จนกว่าจะมีระบบซีลรุ่นใหม่ที่ผ่านทดสอบการแทรกทะลุ TS</p>
        </section>
      </div>
    </article>

    <footer>
      <p>©D-SCP</p>
    </footer>
  </main>

<div class="gallery-modal" id="galleryModal" hidden aria-hidden="true">
  <div class="gallery-dialog" role="dialog" aria-modal="true" aria-labelledby="galleryTitle" tabindex="-1">
    <button class="gallery-close" type="button" data-gallery-close aria-label="ปิดอัลบั้ม">&times;</button>
    <h2 class="gallery-title" id="galleryTitle">อัลบั้มภาพ SCP-TH-3921</h2>
    <div class="gallery-frame">
      <img src="d-scp.png" alt="ภาพประกอบภารกิจ SCP-TH-3921" data-gallery-img />
      <video data-gallery-video controls playsinline preload="metadata" hidden></video>
    </div>
    <div class="gallery-controls">
      <div class="gallery-nav">
        <button class="btn ghost" type="button" data-gallery-prev aria-label="ภาพก่อนหน้า">ก่อนหน้า</button>
        <button class="btn" type="button" data-gallery-next aria-label="ภาพถัดไป">ถัดไป</button>
      </div>
      <div class="gallery-pagination"><span data-gallery-index>1</span> / <span data-gallery-total>4</span></div>
    </div>
  </div>
</div>

    <script>
    // สลับธีม: บันทึกค่าใน localStorage
    (function() {
      const root = document.documentElement;
      const motionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
      const prefersReducedMotion = motionQuery.matches;
      const saved = localStorage.getItem('theme');
      if (saved === 'light') root.classList.add('light');

      const btn = document.getElementById('themeBtn');
      btn?.addEventListener('click', () => {
        root.classList.toggle('light');
        localStorage.setItem('theme', root.classList.contains('light') ? 'light' : 'dark');
      });

      const copyBtn = document.getElementById('copyLink');
      copyBtn?.addEventListener('click', (e) => {
        e.preventDefault();
        navigator.clipboard.writeText(window.location.href).then(() => {
          copyBtn.textContent = '✓ คัดลอกแล้ว';
          setTimeout(() => (copyBtn.textContent = '🔗 คัดลอกลิงก์'), 1600);
        });
      });
      const header = document.querySelector('header.site');
      const toggleHeaderState = () => {
        if (!header) return;
        header.classList.toggle('is-scrolled', window.scrollY > 24);
      };
      toggleHeaderState();
      window.addEventListener('scroll', toggleHeaderState, { passive: true });

      if (!prefersReducedMotion) {
        const revealTargets = document.querySelectorAll('.paper, .section, .callout, .toc .badge, footer, .actions, .brand, .gallery-callout, .audio-player');
        const revealObserver = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              entry.target.style.removeProperty('transition-delay');
              revealObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.12, rootMargin: '0px 0px -10% 0px' });

        revealTargets.forEach((el, index) => {
          el.classList.add('reveal');
          el.style.transitionDelay = `${Math.min(index * 45, 240)}ms`;
          revealObserver.observe(el);
        });
      }

      const galleryImages = [
        { src: 'd-scp.png', alt: 'Field dossier cover for SCP-TH-3921', type: 'image' },
        { src: 'd-scp2.png', alt: 'Containment briefing sheet for SCP-TH-3921', type: 'image' },
        { src: 'p-010929.png', alt: 'Field photograph of SCP-TH-3921', type: 'image' },
        { src: 'dorner.mp4', alt: 'Interview footage regarding SCP-TH-3921', type: 'video', poster: 'p-010929.png' },
      ];
      const openGalleryBtn = document.getElementById('openGallery');
      const galleryModal = document.getElementById('galleryModal');
      if (openGalleryBtn && galleryModal && galleryImages.length) {
        const dialog = galleryModal.querySelector('.gallery-dialog');
        const imageEl = galleryModal.querySelector('[data-gallery-img]');
        const videoEl = galleryModal.querySelector('[data-gallery-video]');
        const indexEl = galleryModal.querySelector('[data-gallery-index]');
        const totalEl = galleryModal.querySelector('[data-gallery-total]');
        const prevBtn = galleryModal.querySelector('[data-gallery-prev]');
        const nextBtn = galleryModal.querySelector('[data-gallery-next]');
        const closeEls = galleryModal.querySelectorAll('[data-gallery-close]');

        let current = 0;
        if (totalEl) totalEl.textContent = String(galleryImages.length);

        const render = () => {
          const currentItem = galleryImages[current];
          if (videoEl) {
            videoEl.pause();
            videoEl.currentTime = 0;
          }

          if (currentItem.type === 'video') {
            if (imageEl) {
              imageEl.hidden = true;
              imageEl.removeAttribute('src');
              imageEl.removeAttribute('alt');
            }
            if (videoEl) {
              videoEl.hidden = false;
              if (currentItem.poster) {
                videoEl.poster = currentItem.poster;
              } else {
                videoEl.removeAttribute('poster');
              }
              videoEl.src = currentItem.src;
              if (currentItem.alt) {
                videoEl.setAttribute('aria-label', currentItem.alt);
              } else {
                videoEl.removeAttribute('aria-label');
              }
              videoEl.load();
            }
          } else {
            if (videoEl) {
              videoEl.hidden = true;
              videoEl.removeAttribute('src');
              videoEl.removeAttribute('poster');
              videoEl.removeAttribute('aria-label');
              videoEl.load();
            }
            if (imageEl) {
              imageEl.hidden = false;
              imageEl.src = currentItem.src;
              imageEl.alt = currentItem.alt || '';
            }
          }

          if (indexEl) indexEl.textContent = String(current + 1);
        };

        const openModal = (startIndex = 0) => {
          current = startIndex;
          render();
          galleryModal.hidden = false;
          galleryModal.setAttribute('aria-hidden', 'false');
          document.body.classList.add('modal-open');
          if (dialog) dialog.focus();
        };

        const closeModal = () => {
          if (galleryModal.hidden) return;
          galleryModal.hidden = true;
          galleryModal.setAttribute('aria-hidden', 'true');
          document.body.classList.remove('modal-open');
          videoEl?.pause();
          if (videoEl) {
            videoEl.currentTime = 0;
          }
          openGalleryBtn.focus();
        };

        const showPrev = () => {
          current = (current - 1 + galleryImages.length) % galleryImages.length;
          render();
        };

        const showNext = () => {
          current = (current + 1) % galleryImages.length;
          render();
        };

        openGalleryBtn.addEventListener('click', () => openModal());
        prevBtn?.addEventListener('click', showPrev);
        nextBtn?.addEventListener('click', showNext);
        closeEls.forEach((el) => el.addEventListener('click', closeModal));

        galleryModal.addEventListener('click', (event) => {
          if (event.target === galleryModal) closeModal();
        });

        const handleKey = (event) => {
          if (event.key === 'Escape') closeModal();
          if (event.key === 'ArrowLeft') { event.preventDefault(); showPrev(); }
          if (event.key === 'ArrowRight') { event.preventDefault(); showNext(); }
        };

        galleryModal.addEventListener('keydown', handleKey);
        dialog?.addEventListener('keydown', handleKey);
      }

      const formatTime = (seconds) => {
        if (!Number.isFinite(seconds)) return '--:--';
        const clamped = Math.max(0, seconds);
        const mins = Math.floor(clamped / 60);
        const secs = Math.floor(clamped % 60);
        return String(mins).padStart(2, '0') + ':' + String(secs).padStart(2, '0');
      };

      const audioPlayers = Array.from(document.querySelectorAll('[data-audio-player]'));
      if (audioPlayers.length) {
        const syncState = (playerEl, playing) => {
          const toggleEl = playerEl.querySelector('[data-audio-toggle]');
          const iconEl = playerEl.querySelector('[data-audio-icon]');
          const labelEl = playerEl.querySelector('[data-audio-label]');
          if (iconEl) iconEl.innerHTML = playing ? '&#10074;&#10074;' : '&#9654;';
          if (labelEl) labelEl.textContent = playing ? 'Pause audio' : 'Play audio';
          if (toggleEl) toggleEl.setAttribute('aria-label', playing ? 'Pause interview audio' : 'Play interview audio');
        };

        const updateTimeText = (playerEl, audioEl) => {
          const currentEl = playerEl.querySelector('[data-audio-time-current]');
          const totalEl = playerEl.querySelector('[data-audio-time-total]');
          if (currentEl) currentEl.textContent = formatTime(audioEl.currentTime);
          if (totalEl) totalEl.textContent = formatTime(audioEl.duration);
        };

        const stopOthers = (currentAudio) => {
          audioPlayers.forEach((playerEl) => {
            const audioEl = playerEl.querySelector('audio');
            if (!audioEl || audioEl === currentAudio) return;
            if (!audioEl.paused) audioEl.pause();
            audioEl.currentTime = 0;
            syncState(playerEl, false);
            updateTimeText(playerEl, audioEl);
            const sliderOther = playerEl.querySelector('[data-audio-slider]');
            if (sliderOther) {
              const duration = audioEl.duration;
              const hasDuration = Number.isFinite(duration) && duration > 0;
              sliderOther.max = hasDuration ? duration : 0;
              sliderOther.disabled = !hasDuration;
              sliderOther.value = 0;
              sliderOther.style.setProperty('--progress', '0%');
            }
          });
        };

        audioPlayers.forEach((playerEl) => {
          const audioEl = playerEl.querySelector('audio');
          const toggleEl = playerEl.querySelector('[data-audio-toggle]');
          const sliderEl = playerEl.querySelector('[data-audio-slider]');
          if (!audioEl || !toggleEl) return;

          const updateSlider = () => {
            if (!sliderEl) return;
            const duration = audioEl.duration;
            const hasDuration = Number.isFinite(duration) && duration > 0;
            if (hasDuration) {
              sliderEl.max = duration;
              sliderEl.disabled = false;
              sliderEl.value = audioEl.currentTime;
              const percent = Math.min(Math.max(audioEl.currentTime / duration, 0), 1);
              sliderEl.style.setProperty('--progress', `${(percent * 100).toFixed(2)}%`);
            } else {
              sliderEl.max = 0;
              sliderEl.value = 0;
              sliderEl.disabled = true;
              sliderEl.style.setProperty('--progress', '0%');
            }
          };

          const refreshTime = () => {
            updateTimeText(playerEl, audioEl);
            updateSlider();
          };

          toggleEl.addEventListener('click', () => {
            if (audioEl.paused || audioEl.ended) {
              stopOthers(audioEl);
              audioEl.play().catch(() => {
                syncState(playerEl, false);
              });
            } else {
              audioEl.pause();
            }
          });

          audioEl.addEventListener('play', () => {
            stopOthers(audioEl);
            syncState(playerEl, true);
          });

          audioEl.addEventListener('pause', () => {
            if (!audioEl.ended) syncState(playerEl, false);
            refreshTime();
          });

          audioEl.addEventListener('loadedmetadata', refreshTime);
          audioEl.addEventListener('durationchange', refreshTime);
          audioEl.addEventListener('timeupdate', refreshTime);
          audioEl.addEventListener('seeked', refreshTime);

          audioEl.addEventListener('ended', () => {
            audioEl.currentTime = 0;
            syncState(playerEl, false);
            refreshTime();
          });

          document.addEventListener('visibilitychange', () => {
            if (document.hidden) audioEl.pause();
          });

          if (sliderEl) {
            sliderEl.addEventListener('input', () => {
              if (!Number.isFinite(audioEl.duration) || audioEl.duration <= 0) return;
              audioEl.currentTime = Number(sliderEl.value);
              if (audioEl.paused) refreshTime();
            });
          }

          refreshTime();
        });
      }
    })();
  </script>
</body>
</html>
